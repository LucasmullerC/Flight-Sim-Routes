<div class="container">
  <form ngNoForm class="form" [formGroup]="flightsForm" (ngSubmit)="onSubmit()">
    <div
      class="options"
      [ngClass]="question.type"
      *ngFor="let question of formOptions"
    >
    <div class="form-header">
      <label>{{ question.title }}<span *ngIf="question.required">*</span></label> <span *ngIf="isType(question,'distance')">Min: {{minValue}} Max: {{maxValue}}</span>
    </div>

      <div
        class="section"
        *ngIf="!isType(question,'country') && !isType(question,'database')"
      >
      <!--Is continuous checkbox-->
        <input
          id="checkbox-item"
          *ngIf="isContinous(question)"
          type="checkbox"
          formControlName="continuous"
          (change)="checkboxValue = !checkboxValue"
        />

        <!--Variable input-->
        <input
          *ngIf="
            (isContinous(question) && checkboxValue) || !isContinous(question) && !isType(question,'distance')
          "
          type="{{ question.type }}"
          [placeholder]="question.placeholder"
          [required]="question.required"
          [min]="question.min"
          [max]="question.max"
          formControlName="{{question.formControlName}}"
        />
        
      </div>

      <mat-slider *ngIf="isType(question,'distance')" [min]="question.min" [max]="question.max">
        <input matSliderStartThumb formControlName="minDistance"  [(ngModel)]="minValue"> 
        <input matSliderEndThumb formControlName="maxDistance" [(ngModel)]="maxValue">
      </mat-slider>


      <!--database selector-->
      <div class="section" *ngIf="isType(question,'database')"> 
        <select [(ngModel)]="database" [ngModelOptions]="{standalone: true}" required>
          <option class="dropdown-item" disabled selected value="undefined">
            {{ question.placeholder }}
          </option>
          <option *ngFor="let database of databaseList" [value]="database">
            {{ database }}
          </option>
        </select>
      </div>

      <!--Country selector-->
      <div class="section" *ngIf="isType(question,'country')">
        <select formControlName="{{question.formControlName}}">
          <option class="dropdown-item" disabled selected value="undefined">
            {{ question.placeholder }}
          </option>
          <option *ngFor="let country of countries" [value]="country.cca2">
            {{ country.name.common }}
          </option>
        </select>
      </div>
    </div>
    <div class="button-container">
      <button type="submit">Generate!</button>
    </div>
  </form>
</div>
